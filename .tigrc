# Rebind tig's default handlers for <Up> and <Down> (which do a weird thing
# by not following the focus) to <C-Up> and <C-Down>
bind generic <esc>[1;5A previous
bind generic <esc>[1;5B next

# Bind "reasonable" handlers that _do_ follow focus to <Up> and <Down>
bind generic    <Up>    move-up
bind generic    <Down>  move-down

# tmux/shell integration
# (alas, there is a bunch of things not easily doable in tig)
bind generic ;vs +tmux split-window -h -c %(directory)
bind generic ;sp +tmux split-window -v -c %(directory)

# Binding for "reload configuration"
bind generic ;so :source ~/.tigrc
# Binding for "refresh"
bind generic <Ctrl-R> :refresh

# Bindings for "interactive rebase onto this commit"
bind main ;rb ?!>git rebase-i --autostash %(commit)
# "Interactive rebase onto merge-base from this commit"
bind main ;rk ?!>git rebase-i --autostash --keep-base %(commit)
# "Interactive rebase of everything starting with this commit"
bind main ;rr ?!>git rebase-i --autostash %(commit)^

# Bindings for forms of `git reset`
bind main ;Rs @git reset --soft %(commit)
bind main ;Rr ?@git reset %(commit)
bind main ;RH ?@git reset --hard %(commit)
bind main ;RM ?>git reset --merge %(commit)

# Bindings for `git merge`
bind main ;M >git merge --ff-only %(commit)
bind main ;mm ?>git merge --ff %(commit)
bind main ;mr ?>git merge --rebase %(commit)

# Universal binding for `git checkout` of the branch or commit under cursor
# (see .gitconfig for `git zz-tig-checkout`)
bind main ;co !>git zz-tig-checkout +%(branch) +%(commit)
